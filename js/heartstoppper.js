const Hearts = [
    {
        "nome": "Heartstopper (VOL.1)",
        "texto": "Charlie Spring e Nick Nelson não têm quase nada em comum. Charlie é um aluno dedicado e bastante inseguro por conta do bullying que sofre no colégio desde que se assumiu gay. Já Nick é superpopular, especialmente querido por ser um ótimo jogador de rúgbi. Quando os dois passam a sentar um ao lado do outro toda manhã, uma amizade intensa se desenvolve, e eles ficam cada vez mais próximos.",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "9",
        "genero": "Capa dura",
        "preco": "45.55",
        "capa": "../assets/heartopper.png"
    },
    {
        "nome": "Heartstopper (VOL.2)",
        "texto": "No segundo volume da série Heartstopper, Charlie e Nick precisam entender o que um beijo significa para a relação dos dois — e, principalmente, para eles mesmos. Charlie e Nick são melhores amigos, mas tudo muda depois que eles se beijam em uma festa. Charlie acredita que cometeu um grande erro e arruinou a amizade dos dois para sempre, e Nick está mais confuso do que nunca.",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "10",
        "genero": "Capa dura",
        "preco": "59,13",
        "capa": "../assets/heartopper 2.png"
    },
    {
        "nome": "Heartstopper (VOL.3)",
        "texto": "Depois de entenderem o que sentiam um pelo outro, Charlie e Nick se tornaram oficialmente namorados, e cada dia é uma nova oportunidade para se conhecerem um pouco mais. Mas nem tudo é fácil, principalmente quando se trata de se assumir enquanto casal para o mundo.",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "11",
        "genero": "Capa dura",
        "preco": "46,82",
        "capa": "../assets/heartopper 3.png"
    },
    {
        "nome": "Heartstopper (VOL.4)",
        "texto": "Charlie e Nick já não precisam esconder de ninguém no colégio que estão namorando, e agora, mais do que nunca, Charlie quer finalmente dizer “Eu te amo”. O que parece um gesto simples se torna bem complicado quando sua ansiedade o faz questionar se Nick se sente da mesma forma…",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "12",
        "genero": "Capa dura",
        "preco": "47,49",
        "capa": "../assets/heartopper 4.png"
    },
    {
        "nome": "Heartstopper (VOL.5)",
        "texto": "Nick e Charlie estão mais apaixonados do que nunca. Eles já se declararam um para o outro, começaram a namorar, e Charlie está quase convencendo sua mãe a deixá-lo dormir na casa de Nick… Mas com a partida de Nick para a universidade no próximo ano, será que tudo está prestes a mudar?",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "13",
        "genero": "Capa dura",
        "preco": "59,00",
        "capa": "../assets/heartopper 5.png"
    },
    {
        "nome": "Nick e Charlie: Uma novela de Heartstopper",
        "texto": "Todo mundo sabe que Nick e Charlie são inseparáveis. Entre tardes jogando videogame, noites de filmes e conversas infinitas, não há nada que possa abalar o sentimento que um tem pelo outro.Com a partida de Nick para a universidade se aproximando, Charlie fica cada vez mais inseguro, afinal todos dizem que o primeiro amor quase nunca dura para sempre…",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "14",
        "genero": "Capa dura",
        "preco": "44,90",
        "capa": "../assets/heartopper 6.png"
    },
];

const allLivros = [
    {
        "nome": "Os dois morrem no final",
        "texto": "No dia 5 de setembro, pouco depois da meia-noite, Mateo Torrez e Rufus Emeterio recebem uma ligação da Central da Morte. A notícia é devastadora: eles vão morrer naquele mesmo dia.Os dois não se conhecem, mas, por motivos diferentes, estão à procura de um amigo com quem compartilhar os últimos momentos, uma conexão verdadeira que ajude a diminuir um pouco a angústia e a solidão que sentem. Por sorte, existe um aplicativo para isso, e é graças a ele que Rufus e Mateo vão se encontrar para uma última grande aventura viver uma vida inteira em um único dia",
        "autor": "Adam Silvera",
        "classificacao": "4.7",
        "id": "1",
        "genero": "Brochura",
        "preco": "45.00",
        "capa": "../assets/livro 1.png"
    },
    {
        "nome": "Aritóteles e Dante Descobrem os segredos do universo",
        "texto": "Dante sabe nadar. Ari não. Dante é articulado e confiante. Ari tem dificuldade com as palavras e duvida de si mesmo. Dante é apaixonado por poesia e arte. Ari se perde em pensamentos sobre seu irmão mais velho, que está na prisão.Um garoto como Dante, com um jeito tão único de ver o mundo, deveria ser a última pessoa capaz de romper as barreiras que Ari construiu em volta de si.",
        "autor": "Benjamin Alire Sáenz",
        "classificacao": "4.8",
        "id": "2",
        "genero": "Brochura",
        "preco": "48.00",
        "capa": "../assets/livro 2.png"
    },
    {
        "nome": "Os sete maridos de Evelyn Hugo",
        "texto": "Lendária estrela de Hollywood, Evelyn Hugo sempre esteve sob os holofotes ― seja estrelando uma produção vencedora do Oscar, protagonizando algum escândalo ou aparecendo com um novo marido… pela sétima vez. Agora, prestes a completar oitenta anos e reclusa em seu apartamento no Upper East Side, a famigerada atriz decide contar a própria história ― ou sua “verdadeira história”",
        "autor": "Taylor Jenkins Reid",
        "classificacao": "4.8", 
        "id": "3",
        "genero": "Capa normal ",
        "preco": "42,27",
        "capa": "../assets/livro 3.png"
    },
    {
        "nome": "Luzes do Norte",
        "texto": "Dimitria Coromandel é uma caçadora excepcional, a melhor da região, e, após a morte dos seus pais, se tornou a base para o sustento de sua pequena família. Para ela, o peso da responsabilidade e a necessidade de conseguir dinheiro são os impulsos de sua movimentada rotina, e, no inclemente inverno de Nurensalem, ela precisa caçar durante o dia se quiser trazer comida para a casa à noite. No entanto, quando fisga a atenção de Bóris van Vintermer, patriarca da família mais rica do local, sua realidade começa aos poucos a se transformar.",
        "autor": "Giulianna Domingues",
        "classificacao": "4.7",
        "id": "4",
        "genero": "Capa comum",
        "preco": "46,10",
        "capa": "../assets/livro 4.png"
    },
    {
        "nome": "Rua do medo",
        "texto": "O convite chegou em um envelope com uma tarja preta. Dentro, havia um cartão com o desenho de um caixão funerário, onde estava escrito: “Reservado para você.” Era perfeito para uma festa de Halloween na Rua do Medo. Mas Terry e a namorada, Niki, não sabiam por que tinham sido convidados. Afinal, mal conheciam a bela e misteriosa Justine Cameron, a anfitriã. ",
        "autor": "RL.Stine",
        "classificacao": "4.6",
        "id": "5",
        "genero": "Capa dura",
        "preco": "55.74",
        "capa": "../assets/livro 5.png"
    },
    {
        "nome": "O amor não é óbvio",
        "texto": "O amor não é óbvio. Ele está presente quando você se senta com a sua vizinha idosa para assistir a um novo capítulo da sua novela favorita. Ele é posto à prova quando você escuta as histórias mirabolantes da sua melhor amiga, ainda que nenhuma delas lhe interesse. E, às vezes, ele aparece quando você menos espera e te leva a fazer experimentos científicos munida de binóculos e uma bicicleta amarela.",
        "autor": "Elayne Baeta",
        "classificacao": "4.8",
        "id": "6",
        "genero": "Capa comum",
        "preco": "50,64",
        "capa": "../assets/livro 6.png"
    },
    {
        "nome": "Outra cor para o Amor",
        "texto": "Após mudar de cidade e de colégio no meio do ano letivo, Pedro conhece Felipe e se apaixona. Habituado a envolver-se casualmente, descobre em Felipe o que mais teme e mais deseja: amor. Enfrentando as consequências da repressão e da aceitação, redescobrem a si próprios e descobrem que o amor é feito de cores.",
        "autor": "Mateus Melo",
        "classificacao": "4.2",
        "id": "7",
        "genero": "eBook",
        "preco": "5.99",
        "capa": "../assets/ebook 1.png"
    },
    {
        "nome": "Girls like Girls",
        "texto": "Coley sente que não é a mesma desde a morte da mãe. Forçada a morar no interior do Oregon com o pai que abandonou a família, a garota se vê sozinha em um lugar desconhecido e conservador. Não parece o melhor momento para abrir seu coração, mas tudo muda quando ela conhece Sonya.",
        "autor": "Hayley Kiyoko",
        "classificacao": "4.8",
        "id": "8",
        "genero": "eBook",
        "preco": "10.47",
        "capa": "../assets/ebook 2.png"
    },
    {
        "nome": "Heartstopper (VOL.1)",
        "texto": "Charlie Spring e Nick Nelson não têm quase nada em comum. Charlie é um aluno dedicado e bastante inseguro por conta do bullying que sofre no colégio desde que se assumiu gay. Já Nick é superpopular, especialmente querido por ser um ótimo jogador de rúgbi. Quando os dois passam a sentar um ao lado do outro toda manhã, uma amizade intensa se desenvolve, e eles ficam cada vez mais próximos.",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "9",
        "genero": "Capa dura",
        "preco": "45.55",
        "capa": "../assets/heartopper.png"
    },
    {
        "nome": "Heartstopper (VOL.2)",
        "texto": "No segundo volume da série Heartstopper, Charlie e Nick precisam entender o que um beijo significa para a relação dos dois — e, principalmente, para eles mesmos. Charlie e Nick são melhores amigos, mas tudo muda depois que eles se beijam em uma festa. Charlie acredita que cometeu um grande erro e arruinou a amizade dos dois para sempre, e Nick está mais confuso do que nunca.",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "10",
        "genero": "Capa dura",
        "preco": "59,13",
        "capa": "../assets/heartopper 2.png"
    },
    {
        "nome": "Heartstopper (VOL.3)",
        "texto": "Depois de entenderem o que sentiam um pelo outro, Charlie e Nick se tornaram oficialmente namorados, e cada dia é uma nova oportunidade para se conhecerem um pouco mais. Mas nem tudo é fácil, principalmente quando se trata de se assumir enquanto casal para o mundo.",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "11",
        "genero": "Capa dura",
        "preco": "46,82",
        "capa": "../assets/heartopper 3.png"
    },
    {
        "nome": "Heartstopper (VOL.4)",
        "texto": "Charlie e Nick já não precisam esconder de ninguém no colégio que estão namorando, e agora, mais do que nunca, Charlie quer finalmente dizer “Eu te amo”. O que parece um gesto simples se torna bem complicado quando sua ansiedade o faz questionar se Nick se sente da mesma forma…",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "12",
        "genero": "Capa dura",
        "preco": "47,49",
        "capa": "../assets/heartopper 4.png"
    },
    {
        "nome": "Heartstopper (VOL.5)",
        "texto": "Nick e Charlie estão mais apaixonados do que nunca. Eles já se declararam um para o outro, começaram a namorar, e Charlie está quase convencendo sua mãe a deixá-lo dormir na casa de Nick… Mas com a partida de Nick para a universidade no próximo ano, será que tudo está prestes a mudar?",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "13",
        "genero": "Capa dura",
        "preco": "59,00",
        "capa": "../assets/heartopper 5.png"
    },
    {
        "nome": "Nick e Charlie: Uma novela de Heartstopper",
        "texto": "Todo mundo sabe que Nick e Charlie são inseparáveis. Entre tardes jogando videogame, noites de filmes e conversas infinitas, não há nada que possa abalar o sentimento que um tem pelo outro.Com a partida de Nick para a universidade se aproximando, Charlie fica cada vez mais inseguro, afinal todos dizem que o primeiro amor quase nunca dura para sempre…",
        "autor": "Alice Oseman",
        "classificacao": "4.9",
        "id": "14",
        "genero": "Capa dura",
        "preco": "44,90",
        "capa": "../assets/heartopper 6.png"
    },
    {
        "nome": "Princesas mortas não se apaixonam",
        "texto": "Nascida na família real britânica, Amélia Mountbatten Wales jamais seria uma adolescente comum. Foi por isso que criou Holy, um disfarce perfeito para explorar Londres sem o peso dos deveres reais. A farsa e a realidade vividas pela princesa pareciam incapazes de colidir até conhecer, sob o disfarce de Holy, Roma Borges, brasileira recém-chegada à Inglaterra e filha do detetive-chefe da Scotland Yard",
        "autor": "Raíssa Selvaticci",
        "classificacao": "4.7",
        "id": "15",
        "genero": "Brochura",
        "preco": "45,00",
        "capa": "../assets/lgbt.png"
    },
    {
        "nome": "Minha versão de você",
        "texto": "Há três anos a família de Tanner Scott se mudou da Califórnia para Utah, fazendo com que sua bissexualidade voltasse para o armário. Agora, com apenas mais um semestre até o fim das aulas no colegial e seu tão sonhado futuro em uma universidade longe da família, ele só deseja que o tempo passe mais depressa. Quando Autumn, sua melhor amiga, se inscreve na aula de escrita e o desafia a participar, Tanner não consegue recusar o convite, afinal de contas, quatro meses é tempo mais do que suficiente para escrever um livro, certo?",
        "autor": "Christina Lauren",
        "classificacao": "4.8",
        "id": "16",
        "genero": "Capa dura",
        "preco": "48,00",
        "capa": "../assets/lgbt 2.png"
    },
    {
        "nome": "Bola de três",
        "texto": "Arthur é o astro do time de basquete. Davi está sempre no topo do ranking de notas do terceiro ano. Dois garotos que nunca trocaram uma palavra sequer são atraídos para o universo um do outro por um boato que começa a circular pela escola: o de que Davi está a fim de Arthur.Para tirar essa história a limpo, Arthur vai conversar com Davi e acaba descobrindo, entre muitas outras coisas, que ele também joga basquete. Assim, o mundo dos dois se entrelaça.",
        "autor": "Luíza Carolina Silva",
        "classificacao": "4.8",
        "id": "17",
        "genero": "Capa dura",
        "preco": "42,27",
        "capa": "../assets/lgbt 3.png"
    },
    {
        "nome": "Blackout a New York",
        "texto": "Uma onda de calor causa um apagão em Nova York. Multidões se formam nas ruas, o metrô para de funcionar e o trânsito fica congestionado. Conforme o sol se põe e a escuridão toma conta da cidade, seis jovens casais veem outro tipo de eletricidade surgir no ar…Um primeiro encontro ao acaso. Amigos de longa data. Ex-namorados ressentidos. Duas garotas feitas uma para a outra. Dois garotos escondidos sob máscaras. Um namoro repleto de dúvidas.",
        "autor": "Dhanielle Clayton",
        "classificacao": "4.7",
        "id": "18",
        "genero": "Capa comum",
        "preco": "46,10",
        "capa": "../assets/lgbt 4.png"
    },
    {
        "nome": "Garotas (im) Perfeitas ",
        "texto": "Se o Ensino Médio fosse uma selva, Áustria Fontes seria um leão. Com um boletim cheio de notas impecáveis, rosto digno das capas de revista, um namoro perfeito e a dose de maldade necessária para se manter no topo, nada pode atrapalhar seu último ano no ensino médio — e sua carreira de miss em ascensão. Nada, exceto a morte misteriosa de seu namorado. Como todo garoto rico e popular, Hélia Golucci carregava a admiração e o ódio de toda a escola nas costas. Com uma lista enorme de desavenças, Áustria sabe que qualquer um em American Saint teria bons motivos para matá-lo — ainda que a polícia descarte a hipótese de assassinato",
        "autor": "Raíssa Selvaticci",
        "classificacao": "4.2",
        "id": "19",
        "genero": "eBook",
        "preco": "10,99",
        "capa": "../assets/lgbt 5.png"
    },
    {
        "nome": "Sempre em frente",
        "texto": "Simon Snow é o Escolhido. Segundo as lendas, ele é o feiticeiro que garantirá a paz no Mundo dos Magos. Isso seria extraordinário se Simon não fosse desastrado, esquecido e um feiticeiro pouco habilidoso, incapaz de controlar seus poderes. Ele está no penúltimo ano da Escola de Magia de Watford, e, ao lado de sua melhor amiga Penelope e sua namorada Agatha, já se meteu nas mais variadas aventuras e confusões ― algumas causadas por Baz, seu arqui-inimigo e colega de quarto, outras pelo Oco, um ser maligno que há tempos tenta acabar com Simon.",
        "autor": "Rainbow Rowell",
        "classificacao": "4.8",
        "id": "20",
        "genero": "eBook",
        "preco": "10.47",
        "capa": "../assets/lgbt 6.png"
    },
]

const formulario = document.getElementById('search');

formulario.addEventListener('submit', function(event) {
  event.preventDefault();

  const input = document.getElementById('input').value.trim();
  const divResultados = document.getElementById('div-resultados');

  if (input === '') {
    divResultados.innerHTML = "Por favor, preencha todos os campos.";
    return;
  }

  const livrosEncontrados = allLivros.filter(livro => 
    livro.nome.toLowerCase().includes(input.toLowerCase())
  );

  const div = document.getElementById('resul');

  if (livrosEncontrados.length > 0) {

    div.innerHTML = `<p style="margin: 20px;">Resultados para "${input}":</p>`;

    divResultados.innerHTML += livrosEncontrados.map(livro => `
        <div style="width: 250px; height: 460px; border: 1px solid; padding: 10px; display: flex; flex-direction: column; justify-content: space-between; align-items: center; background-color: lightblue;">
            <div style="height: 100%; display: flex; flex-direction: column; justify-content: space-between; align-items: center; text-align: center;">
                <img src="${livro.capa}" alt="${livro.nome}" style="width:150px; height:200px;">
                <h3>${livro.nome}</h3>
                <div style="width: 240px;">
                    <p>Autor: ${livro.autor}</p>
                    <p>Gênero: ${livro.genero}</p>
                    <p>Preço: R$ ${livro.preco.replace('.', ',')}</p>
                </div>
            </div>
            <button onclick='AddToCart(${JSON.stringify(livro)})' style="margin-top: 25px; width:80%;">
                <img src="../assets/cart.png" alt="cart" style="width:25px; height:25px">
            </button>
            <a href="../public/product.html" style="width: 100%; display: flex; justify-content: center;">
                <button onclick='knowMore(${JSON.stringify(livro)})' style="margin-top: 10px; width:80%; height:45px; font-weight: bold; font-size: 18px; color: black;">
                    Saiba mais
                </button>
            </a>
        </div>
    `).join('');
  } else {
    div.innerHTML = "<p style='margin: 20px;'>Nenhum livro encontrado.</p>";
  }

  formulario.reset();
});

function renderItems(items, containerId) {
    const container = document.getElementById(containerId);
    container.innerHTML = '';

    items.forEach((item) => {
        const div = document.createElement('div');
        div.style.width = '250px';
        div.style.height = '460px';
        div.style.border = '1px solid';
        div.style.padding = '10px';
        div.style.textAlign = 'center';
        div.style.display = 'flex';
        div.style.flexDirection = 'column';
        div.style.justifyContent = 'space-between';
        div.style.alignItems = 'center';
        div.style.backgroundColor = 'lightblue';

        div.innerHTML = `
            <div style="height: 100%; display: flex; flex-direction: column; justify-content: space-between; align-items: center;">
                <img src="${item.capa}" alt="${item.nome}" style="width:150px; height:200px;">
                <h3>${item.nome}</h3>
                <div style="width: 240px;">
                    <p>Autor: ${item.autor}</p>
                    <p>Gênero: ${item.genero}</p>
                    <p>Preço: R$ ${item.preco.replace('.', ',')}</p>
                </div>
            </div>
            <button onclick='AddToCart(${JSON.stringify(item)})' style="margin-top: 25px; width:80%;">
                <img src="../assets/cart.png" alt="cart" style="width:25px; height:25px">
            </button>
            <a href="../public/product.html" style="width: 100%;">
                <button onclick='knowMore(${JSON.stringify(item)})' style="margin-top: 10px; width:80%; height:45px; font-weight: bold; font-size: 18px;">
                    Saiba mais
                </button>
            </a>
        `;
        container.appendChild(div);
    });
}

function knowMore(item) {
    localStorage.setItem('product', JSON.stringify(item));

    let product = JSON.parse(localStorage.getItem('product')) || [];

    console.log(product)
}

function AddToCart(item) {
    let perfil = JSON.parse(localStorage.getItem('perfil')) || {};
    let DataBank = JSON.parse(localStorage.getItem('DataBank')) || [];

    console.log(perfil);

    if (!perfil.id === undefined) {
        alert('Por favor, realize o login antes de adicionar itens ao carrinho.');
    }
    
    if (!perfil.cart) {
        perfil.cart = [];
    }

    try {
        if (!DataBank[perfil.id]) {
            DataBank[perfil.id] = { ...perfil, cart: [] };
        }

        const itemExistsInPerfilCart = perfil.cart.some(cartItem => cartItem.id === item.id);
        const itemExistsInDataBankCart = DataBank[perfil.id].cart.some(cartItem => cartItem.id === item.id);

        if (!itemExistsInPerfilCart) {
            perfil.cart.push(item);
        }
        if (!itemExistsInDataBankCart) {
            DataBank[perfil.id].cart.push(item);
        }

        localStorage.setItem('perfil', JSON.stringify(perfil));
        localStorage.setItem('DataBank', JSON.stringify(DataBank));
        
        window.alert("Seu item foi adicionado com sucesso a sua lista de desejos!");
    } catch (error) {
        console.error('Erro ao adicionar item ao carrinho:', error);
    }
}

function applyResponsiveLayout() {
    const columns = window.innerWidth < 930 ? 1 : 3;

    ['divHearts'].forEach((id) => {
        const container = document.getElementById(id);
        if (container) {
            container.style.display = 'grid';
            container.style.gridTemplateColumns = `repeat(${columns}, 1fr)`;
            container.style.gap = '25px';
        }
    });
}

document.addEventListener('DOMContentLoaded', () => {
    applyResponsiveLayout();
    renderItems(Hearts, 'divHearts');
});

window.addEventListener('resize', applyResponsiveLayout);
